<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>FixMyLocal üõ†Ô∏è</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-50 text-gray-900 min-h-screen flex flex-col">

  <header class="max-w-3xl mx-auto px-6 py-8">
    <h1 class="text-4xl font-extrabold mb-2 flex items-center gap-3">
      üõ†Ô∏è <span>FixMyLocal</span>
    </h1>
    <p class="text-gray-600">Report local issues quickly & easily</p>
  </header>

  <main class="flex-grow max-w-3xl mx-auto px-6 w-full">
    <div class="flex justify-end mb-6">
      <button
        onclick="location.href='/map'"
        class="inline-flex items-center gap-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 active:bg-blue-800 text-white font-semibold rounded shadow focus:outline-none focus:ring-2 focus:ring-blue-400"
        aria-label="View Report Map"
      >
        üó∫Ô∏è View Report Map
      </button>
    </div>

    <form id="reportForm" action="/submit" method="post" novalidate class="bg-white rounded-lg shadow p-6 space-y-6">
      <!-- Issue Type -->
      <fieldset class="space-y-2">
        <label for="type" class="block font-semibold text-sm">Issue Type <span class="text-red-500">*</span></label>
        <select name="type" id="type" required
          class="w-full rounded border border-gray-300 bg-gray-50 text-gray-900 px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-400"
        >
          <option value="" disabled selected>‚Äì Select issue type ‚Äì</option>
          <option value="Water">Water</option>
          <option value="Road">Road</option>
          <option value="Electricity">Electricity</option>
          <option value="Other">Other</option>
        </select>
        <p class="text-red-500 text-sm hidden" id="typeError">Please select an issue type.</p>
      </fieldset>

      <!-- Status -->
      <fieldset class="space-y-2">
        <label for="status" class="block font-semibold text-sm">Status <span class="text-red-500">*</span></label>
        <select name="status" id="status" required
          class="w-full rounded border border-gray-300 bg-gray-50 text-gray-900 px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-400"
        >
          <option value="unresolved">Unresolved</option>
          <option value="resolved">Resolved</option>
        </select>
      </fieldset>

      <!-- Language -->
      <fieldset class="space-y-2">
        <label for="lang" class="block font-semibold text-sm">Language (for voice input)</label>
        <select id="lang" class="w-full rounded border border-gray-300 bg-gray-50 text-gray-900 px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-400">
          <option value="en-US">English</option>
          <option value="hi-IN">Hindi</option>
          <option value="mr-IN">Marathi</option>
        </select>
      </fieldset>

      <!-- Description -->
      <fieldset class="space-y-2">
        <label for="desc" class="block font-semibold text-sm">Description <span class="text-red-500">*</span></label>
        <textarea name="desc" id="desc" rows="4" placeholder="Type or record your issue..." required
          class="w-full rounded border border-gray-300 bg-gray-50 text-gray-900 px-3 py-2 resize-y focus:outline-none focus:ring-2 focus:ring-blue-400"
        ></textarea>
        <p class="text-red-500 text-sm hidden" id="descError">Description cannot be empty.</p>
      </fieldset>

      <!-- Voice recording controls -->
      <div class="flex gap-3 items-center">
        <button
          type="button"
          id="startRec"
          class="flex items-center gap-2 px-4 py-2 bg-green-600 hover:bg-green-700 active:bg-green-800 text-white rounded shadow focus:outline-none focus:ring-2 focus:ring-green-400"
          aria-label="Start voice recording"
        >
          üé§ Start Recording
        </button>

        <button
          type="button"
          id="stopRec"
          disabled
          class="flex items-center gap-2 px-4 py-2 bg-red-600 hover:bg-red-700 active:bg-red-800 text-white rounded shadow focus:outline-none focus:ring-2 focus:ring-red-400"
          aria-label="Stop and insert recording"
        >
          ‚èπ Stop & Insert
        </button>

        <span id="recStatus" class="ml-3 text-sm font-medium text-gray-700"></span>
        <span id="timer" class="ml-3 font-mono text-sm text-blue-600"></span>
      </div>

      <!-- Submit -->
      <button
        type="submit"
        id="submitBtn"
        class="w-full mt-4 px-4 py-3 bg-blue-700 hover:bg-blue-800 active:bg-blue-900 text-white font-semibold rounded shadow focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:opacity-50"
      >
        Submit Report
      </button>

    </form>
  </main>

  <footer class="max-w-3xl mx-auto px-6 py-6 text-center text-gray-500 text-sm select-none">
    &copy; 2025 FixMyLocal
  </footer>

  <!-- Toast Notification Container -->
  <div id="toast" aria-live="polite" aria-atomic="true" class="fixed bottom-8 right-8 max-w-xs z-50 hidden">
    <div id="toastMsg" class="bg-gray-800 text-white px-5 py-3 rounded shadow-lg"></div>
  </div>

  <script src="{{ url_for('static', filename='fixmylocal.js') }}" defer></script>

</body>
</html>
